---
layout: none
permalink: /boys-track/
---
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Minnetonka Boys Track team information, race schedules, photos, updates, and coach contacts.">
    <meta name="keywords" content="Minnetonka Boys Track, Tonka Track, High School Track, Minnesota Running">
    
    <title>Boys Track - Tonka Track & Field</title>
    
    <meta property="og:title" content="Boys Track - Tonka Track & Field">
    <meta property="og:description" content="Minnetonka Boys Track - Progress over Perfection">
    <meta property="og:type" content="website">

    <link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="../favicons/favicon.svg" />
    <link rel="shortcut icon" href="../favicons/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon.png" />
    <link rel="manifest" href="../favicons/site.webmanifest" />

    <style>
        /* Minnetonka Color Palette */
        :root {
            /* Primary Colors */
            --minnetonka-blue: #003698;
            --midnight: #002870;
            --white: #ffffff;
            --black: #000000;
            
            /* Secondary/Accent Colors */
            --lake: #5395FF;
            --sky: #8BB4FD;
            --grape: rgb(108, 7, 135);
            --sunbeam: rgb(241, 177, 51);
            --mint: rgb(7, 143, 150);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--white);
            background-attachment: fixed;
            background-size: cover;
            color: #1a202c;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
        }

        .nav-bar {
            background: rgb(255, 255, 255);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-m-img {
            height: 2.5rem;
            width: auto;
            display: block;
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--minnetonka-blue);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: #4a5568;
            text-decoration: none;
            font-weight: 500;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--minnetonka-blue);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, var(--minnetonka-blue) 0%, var(--midnight) 100%);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: #4a5568;
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        .main-content {
            flex: 1 0 auto;
            max-width: 1200px;
            margin: 0 auto;
            padding: 3rem 2rem;
            width: 100%;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .page-header h1 {
            font-size: 3rem;
            font-weight: 800;
            color: var(--minnetonka-blue);
            margin-bottom: 0.5rem;
        }

        .page-header p {
            font-size: 1.2rem;
            color: #4a5568;
        }

        .tab-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .tab-button {
            background: var(--minnetonka-blue);
            color: var(--white);
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 54, 152, 0.3);
        }

        .tab-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 54, 152, 0.4);
        }

        .tab-button.active {
            background: var(--sunbeam);
            color: var(--black);
        }

        .tab-content {
            display: none;
            background: var(--minnetonka-blue);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        .tab-content h2 {
            color: var(--white);
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .tab-content p {
            color: var(--sky);
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 1rem;
        }

        .update-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .update-item h3 {
            color: var(--sunbeam);
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .update-date {
            color: var(--sky);
            font-size: 0.9rem;
            font-style: italic;
            margin-bottom: 0.75rem;
        }

        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }

        .photo-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--sky);
            font-size: 3rem;
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .file-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .file-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem; /* Adds space between text and button */
            transition: all 0.3s ease;
        }

        .file-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }

        .file-name {
            color: var(--white);
            font-size: 1.2rem;
            font-weight: 600;
        }

        .file-description {
            color: var(--sky);
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }

        .download-button {
            background: var(--sunbeam);
            color: var(--black);
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .download-button:hover {
            filter: brightness(1.1);
            transform: scale(1.05);
        }

        .instagram-handle {
            color: var(--sunbeam);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        .instagram-handle:hover {
            color: #e1306c;
        }

        .instagram-handle::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #e1306c 0%, #c13584 50%, #833ab4 100%);
            transition: width 0.3s ease;
        }

        .instagram-handle:hover::after {
            width: 100%;
        }

        .x-handle {
            color: var(--sunbeam);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        .x-handle:hover {
            color: #000000;
        }

        .x-handle::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #000000 0%, #14171A 100%);
            transition: width 0.3s ease;
        }

        .x-handle:hover::after {
            width: 100%;
        }

        /* Phone number link styling */
        a[href^="tel:"] {
            color: var(--sky);
            text-decoration: none;
            font-weight: 600;
            border-bottom: 2px solid var(--sky);
            transition: all 0.3s ease;
        }

        a[href^="tel:"]:hover {
            color: var(--sunbeam) !important;
            border-bottom-color: var(--sunbeam);
        }

        footer {
            background: rgba(26, 32, 44, 0.95);
            backdrop-filter: blur(10px);
            color: white;
            padding: 2rem;
            margin-top: 4rem;
            text-align: center;
            flex-shrink: 0;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 900px) {
            .nav-content {
                padding: 0 1rem;
            }

            .logo-m-img {
                height: 2rem;
            }

            .logo-text {
                font-size: 1.2rem;
            }

            .nav-links {
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(10px);
                flex-direction: column;
                padding: 1rem 0;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                max-height: 0;
                overflow: hidden;
                transition: 0.3s ease;
                opacity: 0;
                gap: 0;
            }

            .nav-links li {
                width: 100%;
            }

            .nav-links a {
                display: block;
                padding: 1rem 2rem;
                width: 100%;
            }

            .nav-links.active {
                max-height: 400px;
                opacity: 1;
            }

            .hamburger {
                display: flex;
                z-index: 1001;
            }

            .hamburger.active span:nth-child(1) {
                transform: rotate(45deg) translate(5px, 5px);
            }

            .hamburger.active span:nth-child(2) {
                opacity: 0;
            }

            .hamburger.active span:nth-child(3) {
                transform: rotate(-45deg) translate(5px, -5px);
            }

            .main-content {
                padding: 2rem 1rem;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .tab-content {
                padding: 1.5rem;
            }

            .tab-content h2 {
                font-size: 1.75rem;
            }

            .tab-button {
                padding: 0.875rem 1.5rem;
                font-size: 1rem;
            }

            .photo-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

        .main-content {
            padding: 2rem 1rem;
        }

        .page-header h1 {
            font-size: 2rem;
        }

        .tab-content {
            padding: 1.5rem;
        }

        .tab-content h2 {
            font-size: 1.75rem;
        }

        .tab-button {
            padding: 0.875rem 1.5rem;
            font-size: 1rem;
        }

        .photo-grid {
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        }

        .photo-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            aspect-ratio: 1;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .photo-item:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.5rem;
            font-size: 0.9rem;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .photo-item:hover .photo-caption {
            transform: translateY(0);
        }

        /* Photo Modal */
        .photo-modal {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            animation: fadeIn 0.3s ease;
        }

        .photo-modal.active {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .photo-modal-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.8), transparent);
            z-index: 3001;
        }

        .photo-modal-content {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }

        .photo-modal-close {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--white);
            color: var(--white);
            font-size: 1.5rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-modal-close:hover {
            background: var(--white);
            color: var(--black);
            transform: rotate(90deg);
        }

        .photo-modal-close:hover svg path {
            stroke: var(--black);
        }

        .photo-modal-actions {
            display: flex;
            gap: 1rem;
        }

        .photo-action-button {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--white);
            color: var(--white);
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .photo-action-button:hover {
            background: var(--sunbeam);
            color: var(--black);
            border-color: var(--sunbeam);
            transform: translateY(-2px);
        }

        .photo-modal-content-wrapper {
            max-width: 90vw;
            max-height: 85vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .photo-modal-content {
            max-width: 100%;
            max-height: 85vh;
            object-fit: contain;
            border-radius: 8px;
        }

        .photo-modal-caption {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            color: white;
            text-align: center;
            padding: 1.5rem;
            font-size: 1.2rem;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            z-index: 3001;
        }

        /* Hide body scroll when modal is open */
        body.modal-open {
            overflow: hidden;
        }

        /* Navigation arrows for gallery */
        .photo-nav-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--white);
            color: var(--white);
            font-size: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 3001;
        }

        .photo-nav-arrow:hover {
            background: var(--white);
            color: var(--black);
        }

        .photo-nav-arrow.left {
            left: 2rem;
        }

        .photo-nav-arrow.right {
            right: 2rem;
        }

        /* Loading spinner */
        .photo-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--white);
            font-size: 2rem;
        }

        @media (max-width: 768px) {
            .photo-modal-header {
                padding: 0.75rem 1rem;
            }

            .photo-action-button {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }

            .photo-action-button span {
                display: none; /* Hide text on mobile, keep icons */
            }

            .photo-nav-arrow {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }

            .photo-nav-arrow.left {
                left: 1rem;
            }

            .photo-nav-arrow.right {
                right: 1rem;
            }

            .photo-modal-content {
                max-height: 80vh;
            }
        }

        /* Albums Grid */

        .albums-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

            .album-item {
                background: rgba(255, 255, 255, 0.1);
                border-radius: 16px;
                overflow: hidden;
                cursor: pointer;
                transition: all 0.3s ease;
                border: 2px solid transparent;
            }

            .album-item:hover {
                transform: translateY(-8px);
                box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
                border: 2px solid var(--sunbeam);
            }

            .album-cover {
                width: 100%;
                aspect-ratio: 16/9;
                background: linear-gradient(135deg, var(--lake) 0%, var(--midnight) 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                overflow: hidden;
            }

            .album-cover img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

            .album-cover-placeholder {
                font-size: 4rem;
                color: rgba(255, 255, 255, 0.3);
            }

            .album-info {
                padding: 1.25rem;
            }

            .album-name {
                color: var(--white);
                font-size: 1.3rem;
                font-weight: 700;
                margin-bottom: 0.5rem;
            }

            .album-description {
                color: var(--sky);
                font-size: 0.95rem;
            }

            /* Back Button */
            .back-button {
                background: rgba(255, 255, 255, 0.1);
                color: var(--white);
                border: 2px solid var(--sky);
                padding: 0.75rem 1.5rem;
                border-radius: 10px;
                font-size: 1rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .back-button:hover {
                background: var(--sky);
                color: var(--midnight);
                transform: translateX(-5px);
            }

            /* Photo Grid (update existing) */
            .photo-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1rem;
            }

            /* Coach Cards */
            .coaches-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .coach-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .coach-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            border: 2px solid var(--sunbeam);
        }

        .coach-image {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            background: linear-gradient(135deg, var(--lake) 0%, var(--midnight) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 3px solid var(--sunbeam);
        }

        .coach-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .coach-image-placeholder {
            font-size: 2.5rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .coach-name {
            color: var(--white);
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .coach-title {
            color: var(--sky);
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .email-button {
            display: inline-block;
            background: var(--sunbeam);
            color: var(--black);
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .email-button:hover {
            filter: brightness(1.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(241, 177, 51, 0.4);
        }

        .email-button.disabled {
            background: #4a5568;
            color: #a0aec0;
            cursor: not-allowed;
            pointer-events: none;
            opacity: 0.6;
        }

        .email-button.disabled:hover {
            transform: none;
            box-shadow: none;
            filter: none;
        }
    </style>
</head>
<body>
    <nav class="nav-bar">
        <div class="nav-content">
            <a href="../" class="logo">
                <img src="../images/minnetonka-M-logo.png" alt="Minnetonka M" class="logo-m-img">
                <span class="logo-text">TONKA TRACK</span>
            </a>
            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-links" id="navMenu">
                <li><a href="../" onclick="closeMenu()">Home</a></li>
                <li><a href="../news/" onclick="closeMenu()">News</a></li>
                <li><a href="../sports/" onclick="closeMenu()">Sports</a></li>
                <li><a href="../mtfcca/" onclick="closeMenu()">MTFCCA</a></li>
                <li><a href="../contact/" onclick="closeMenu()">Contact</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-content">
        <div class="page-header">
            <h1>Boys Track & Field</h1>
            <p>Progress over Perfection</p>
        </div>

        <div class="tab-buttons">
            <button class="tab-button active" onclick="showTab('home')">Home</button>
            <button class="tab-button" onclick="showTab('updates')">Updates</button>
            <button class="tab-button" onclick="showTab('photos')">Photos</button>
            <button class="tab-button" onclick="showTab('files')">Files</button>
            <button class="tab-button" onclick="showTab('coaches')">Coaches</button>
        </div>

        <div id="home-tab" class="tab-content active">
            <h2>Welcome to Boys Track & Field</h2>
            <p>Welcome to Minnetonka Boys Track & Field! We are dedicated to developing student-athletes who excel both on the track and in the classroom.</p>
            <p>Our program emphasizes teamwork, dedication, and personal growth. Whether you're a seasoned athlete or new to the sport, we welcome you to join our team and be part of our tradition of excellence.</p>
            <p>You can follow our Instagram <a href="https://www.instagram.com/minnetonka_tf/" target="_blank"
                    rel="noopener noreferrer" class="instagram-handle">@minnetonka_tf</a> or on X <a href="https://x.com/minnetonkatf" target="_blank" rel="noopener noreferrer"
                        class="x-handle">@minnetonka_tf</a> for the latest updates and team
                highlights.</p>
            <div class="update-item">
                <h3>Running Shoes</h3>
                <p style="margin-bottom: 1.5rem;">Athletes get a discount at the following running stores, just tell the sales person that you are on the Minnetonka Track
                and Field Team.</p>
            
                <p style="margin-bottom: 1rem;">
                    <strong style="color: var(--sunbeam); font-size: 1.1rem;">Lakes Running Co</strong><br>
                    Located in downtown Excelsior<br>
                    218 Water Street, Excelsior, MN 55331<br>
                    <a href="tel:952-470-5444" style="color: var(--sky); text-decoration: none;">(952) 470-5444</a>
                </p>
            
                <p style="margin-bottom: 1rem;">
                    <strong style="color: var(--sunbeam); font-size: 1.1rem;">Gear Running</strong><br>
                    Located at 44th and France<br>
                    4406 France Avenue South, Edina, MN 55410-1345<br>
                    <a href="tel:952-926-2645" style="color: var(--sky); text-decoration: none;">(952) 926-2645</a>
                </p>
            
                <p style="margin-bottom: 1rem;">
                    <strong style="color: var(--sunbeam); font-size: 1.1rem;">Gear West</strong><br>
                    Located on Hwy 12 in Long Lake<br>
                    1786 W Wayzata Blvd Suite B, Long Lake, MN 55356<br>
                    <a href="tel:952-473-0377" style="color: var(--sky); text-decoration: none;">(952) 473-0377</a>
                </p>
            
                <p style="margin-bottom: 0;">
                    <strong style="color: var(--sunbeam); font-size: 1.1rem;">TC Running - Discounts for parents too!</strong><br>
                    Located on the SE Corner of Shady Oak Road and Hwy 62<br>
                    6405 City West Pkwy # B5, Eden Prairie, MN 55344<br>
                    <a href="tel:952-944-7386" style="color: var(--sky); text-decoration: none;">(952) 944-7386</a>
                </p>
            </div>  
            <div class="update-item">
                <h3>Uniform Deposit</h3>
                <p>A deposit check for uniforms is required before distribution.</p> 
                <p>Deposit checks can be made out to MTFCCA for $100 and delivered to Coach Finch at any time before distribution. All
                checks will be shredded or returned after uniforms are returned at the end of the season. Please reach out to me
                directly with any questions or concerns on this.</p>
            
            </div>
            <div class="update-item">
                <h3>7 Tips for a Great Pre-Meet Meal</h3>
                
                <p style="margin-bottom: 0.75rem;">
                    <strong style="color: var(--sunbeam);">1. Don't Experiment</strong><br>
                    Don't try new foods on a meet day, it might cause unexpected problems.
                </p>

                <p style="margin-bottom: 0.75rem;">
                    <strong style="color: var(--sunbeam);">2. Avoid Soft Drinks and Candy</strong><br>
                    Sugar is your enemy, empty calories that don't provide long term fuel source.
                </p>
                
                <p style="margin-bottom: 0.75rem;">
                    <strong style="color: var(--sunbeam);">3. High Carbohydrates</strong><br>
                    Never can go wrong with breads, pasta, rice‚Ä¶pure long lasting energy source.
                </p>
                
                <p style="margin-bottom: 0.75rem;">
                    <strong style="color: var(--sunbeam);">4. Timing</strong><br>
                    Takes about 3 hours to empty the stomach of quality food.
                </p>
                
                <p style="margin-bottom: 0.75rem;">
                    <strong style="color: var(--sunbeam);">5. Fluids</strong><br>
                    Plenty of water and sports drinks‚Ä¶stay away from carbonated sugary soft drinks.
                </p>
                
                <p style="margin-bottom: 0.75rem;">
                    <strong style="color: var(--sunbeam);">6. Avoid High Fat Intake</strong><br>
                    Fat takes longer to digest and lots of water to process.
                </p>
                
                <p style="margin-bottom: 0;">
                    <strong style="color: var(--sunbeam);">7. Limit Protein Intake</strong><br>
                    Protein is a weak energy source, great for building tissue but limit the amount immediately prior to competition.
                    Protein is great for recovery after competitions or workouts.
                </p>
            </div>
            <div class="update-item">
                <h3>Important Links</h3>
                <p style="margin-bottom: 1.5rem;">Helpful resources for training, technique, and performance:</p>
                
                <p style="margin-bottom: 1.5rem;">
                    <a href="https://trackandfieldtoolbox.net/category/field-events" target="_blank" rel="noopener noreferrer"
                        style="color: var(--sky); text-decoration: underline;">Track and FieldToolbox</a><span style="color: var(--sky);"> - Scroll through this site to find event specific articles and short videos.
                        Conditioning, drills, nutrition, and mental preparation are among many topics.</span>
                </p>
                <p style="margin-bottom: 1.5rem;">
                    <a href="https://www.athletic.net/team/12302/track-and-field-indoor/2026" target="_blank" rel="noopener noreferrer"
                        style="color: var(--sky); text-decoration: underline;">Athletic.net</a><span style="color: var(--sky);"> - Has a lot info about races including personal times and team results.</span>
                </p>
            </div>
        </div>

        <div id="updates-tab" class="tab-content">
            <h2>Latest Updates</h2>
            
            <div class="update-item">
                <h3>Feed My Starving Children</h3>
                <div class="update-date">March 14, 2026 @ Noon</div>
                <p>Invitation to participate in 10th annual Minnetonka Track and Field FMSC Packing. There are 50 spots reserved at this
                time. Boys and girls athletes and coaches are first priority. Other family members welcome. I will have a sign-up on
                days one and two of practice or you can signup now with me by texting: FMSC, your name and year in school to
                <a href="tel:763-300-1178" style="color: var(--sky); text-decoration: none;">(763) 300-1178</a></p>
            </div>
        </div>

        <div id="photos-tab" class="tab-content">
            <div id="albums-view">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 style="margin: 0;">Photo Albums</h2>
                </div>
                <p id="albums-loading-message" style="color: var(--sky);">Loading albums may take up to a minute...</p>
        
                <div class="albums-grid" id="albums-grid">
                    <!-- Albums will be loaded here -->
                </div>
            </div>
        
            <div id="album-photos-view" style="display: none;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                    <button class="back-button" onclick="backToAlbums()">‚Üê Back to Albums</button>
                    <h2 id="album-title" style="margin: 0;"></h2>
                </div>
                <p id="photos-loading-message" style="color: var(--sky);">Loading photos may take up to a minute...</p>
        
                <div class="photo-grid" id="photo-grid">
                    <!-- Photos will be loaded here -->
                </div>
            </div>
        </div>

        <div id="files-tab" class="tab-content">
            <h2>Team Files & Resources</h2>
            <p id="loading-message" style="color: var(--sky);">Loading files...</p>
        
            <div class="file-list" id="file-list">
                <!-- Files will be loaded here dynamically -->
            </div>
        </div>

        <div id="coaches-tab" class="tab-content">
            <h2>Boys Track & Field</h2>
            <div class="coaches-grid">
                <div class="coach-card">
                    <div class="coach-image">
                        <img src="../images/james-finch.png" alt="James Finch">
                    </div>
                    <div class="coach-name">James Finch</div>
                    <div class="coach-title">Head Coach</div>
                    <a href="mailto:james.finch@minnetonkaschools.org" class="email-button">Send Email</a>
                </div>
                <div class="coach-card">
                    <div class="coach-image">
                        <img src="../images/john-steffen.jpg" alt="John Steffen">
                    </div>
                    <div class="coach-name">John Steffen</div>
                    <div class="coach-title">Jumps / Hurdles</div>
                    <a href="#" class="email-button disabled">Send Email</a>
                </div>
                <div class="coach-card">
                    <div class="coach-image">
                        <img src="../images/dan-murphy.jpeg" alt="Dan Murphy">
                    </div>
                    <div class="coach-name">Dan Murphy</div>
                    <div class="coach-title">Sprints / Relays</div>
                    <a href="#" class="email-button disabled">Send Email</a>
                </div>
                <div class="coach-card">
                    <div class="coach-image">
                        <img src="../images/jeff-renlund.png" alt="Jeff Renlund">
                    </div>
                    <div class="coach-name">Jeff Renlund</div>
                    <div class="coach-title">Distance</div>
                    <a href="#" class="email-button disabled">Send Email</a>
                </div>
                <div class="coach-card">
                    <div class="coach-image">
                        <div class="coach-image-placeholder">üë§</div>
                    </div>
                    <div class="coach-name">Ken Jugasek</div>
                    <div class="coach-title">Horizontal Jumps</div>
                    <a href="#" class="email-button disabled">Send Email</a>
                </div>
                <div class="coach-card">
                    <div class="coach-image">
                        <div class="coach-image-placeholder">üë§</div>
                    </div>
                    <div class="coach-name">Eli Knutson</div>
                    <div class="coach-title">Pole Vault</div>
                    <a href="#" class="email-button disabled">Send Email</a>
                </div>
                <div class="coach-card">
                    <div class="coach-image">
                        <div class="coach-image-placeholder">üë§</div>
                    </div>
                    <div class="coach-name">Jacob Peterson</div>
                    <div class="coach-title">Asst. Distance</div>
                    <a href="#" class="email-button disabled">Send Email</a>
                </div>
                <div class="coach-card">
                    <div class="coach-image">
                        <div class="coach-image-placeholder">üë§</div>
                    </div>
                    <div class="coach-name">Dave Shoemaker</div>
                    <div class="coach-title">Throws</div>
                    <a href="#" class="email-button disabled">Send Email</a>
                </div>
                <div class="coach-card">
                    <div class="coach-image">
                        <div class="coach-image-placeholder">üë§</div>
                    </div>
                    <div class="coach-name">Titus Winders</div>
                    <div class="coach-title">Asst. Distance</div>
                    <a href="#" class="email-button disabled">Send Email</a>
                </div>
            </div>
        </div>

        <!-- Photo Modal -->
        <div id="photo-modal" class="photo-modal">
            <div class="photo-modal-header">
                <button class="photo-modal-close" id="modal-close-btn" onclick="closePhotoModal()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 5L5 15M5 5L15 15" stroke="white" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
                <div class="photo-modal-actions">
                    <button class="photo-action-button" id="download-btn">
                        <span>üì•</span>
                        <span>Download</span>
                    </button>
                    <button class="photo-action-button" id="share-btn">
                        <span>üîó</span>
                        <span>Share</span>
                    </button>
                </div>
            </div>
        
            <div class="photo-nav-arrow left" id="prev-photo" onclick="navigatePhoto(-1)" style="display: none;">‚Äπ</div>
        
            <div class="photo-modal-content-wrapper">
                <div class="photo-loading" id="photo-loading">Loading...</div>
                <img class="photo-modal-content" id="modal-image" style="display: none;">
            </div>
        
            <div class="photo-nav-arrow right" id="next-photo" onclick="navigatePhoto(1)" style="display: none;">‚Ä∫</div>
        
            <div id="modal-caption" class="photo-modal-caption"></div>
        </div>
    </div>

    <footer>
        <p>&copy; 2026 Tonka Track & Field. Building champions, one stride at a time.</p>
    </footer>

    <script>
        function toggleMenu() {
            const menu = document.getElementById('navMenu');
            const hamburger = document.querySelector('.hamburger');
            menu.classList.toggle('active');
            hamburger.classList.toggle('active');
        }

        function closeMenu() {
            const menu = document.getElementById('navMenu');
            const hamburger = document.querySelector('.hamburger');
            menu.classList.remove('active');
            hamburger.classList.remove('active');
        }

        function showTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));

            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');

            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Google Apps Script Web App URL
        // Google Apps Script Web App URL (universal script)
        const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzUyTldRpyDB5Iiw8h20glKK7zY1pEt-53X6YMcw4JMR0Kki-5dZFiXU7agk5FzHoJK/exec';

        // Team-specific folder IDs
        const TEAM_FILES_FOLDER_ID = '1lpjdZAHiWsIgxH8eXMW3KII9Ff1MK1fo';  // The folder containing PDFs and documents
        const TEAM_PHOTOS_FOLDER_ID = '1iJJURi3pZpsPnCwNvgtHwc1BatJlCPL1'; // The folder containing photo albums

        async function loadFiles() {
            const fileListContainer = document.getElementById('file-list');
            const loadingMessage = document.getElementById('loading-message');

            try {
                const response = await fetch(`${APPS_SCRIPT_URL}?action=files&folderId=${TEAM_FILES_FOLDER_ID}`);
                const data = await response.json();

                if (data.success && data.files) {
                    loadingMessage.style.display = 'none';

                    if (data.files.length === 0) {
                        fileListContainer.innerHTML = '<p style="color: var(--sky);">No files available at this time.</p>';
                        return;
                    }

                    // Clear existing content
                    fileListContainer.innerHTML = '';

                    // Create file items
                    data.files.forEach(file => {
                        const fileItem = document.createElement('div');
                        fileItem.className = 'file-item';

                        // Format file size
                        const fileSizeKB = (file.size / 1024).toFixed(2);
                        const fileSizeMB = (file.size / (1024 * 1024)).toFixed(2);
                        const displaySize = file.size > 1024 * 1024 ? `${fileSizeMB} MB` : `${fileSizeKB} KB`;

                        fileItem.innerHTML = `
                        <div>
                            <div class="file-name">${file.name}</div>
                            <div class="file-description">${file.description} ‚Ä¢ ${displaySize}</div>
                        </div>
                        <button class="download-button" onclick="window.open('${file.downloadUrl}', '_blank')">Download</button>
                    `;

                        fileListContainer.appendChild(fileItem);
                    });
                } else {
                    loadingMessage.textContent = 'Error loading files. Please try again later.';
                    loadingMessage.style.color = '#ff6b6b';
                }
            } catch (error) {
                console.error('Error fetching files:', error);
                loadingMessage.textContent = 'Unable to load files. Please check your connection.';
                loadingMessage.style.color = '#ff6b6b';
            }
        }

        // Load files when the page loads
        document.addEventListener('DOMContentLoaded', loadFiles);

        // Also reload files when switching to the files tab
        function showTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));

            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');

            // Add active class to clicked button
            event.target.classList.add('active');

            // Reload files if switching to files tab
            if (tabName === 'files') {
                loadFiles();
            }
        }

        // Photo Albums functionality
        const ALBUMS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzUyTldRpyDB5Iiw8h20glKK7zY1pEt-53X6YMcw4JMR0Kki-5dZFiXU7agk5FzHoJK/exec?action=photoAlbums';
        const ALBUM_PHOTOS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzUyTldRpyDB5Iiw8h20glKK7zY1pEt-53X6YMcw4JMR0Kki-5dZFiXU7agk5FzHoJK/exec?action=albumPhotos';
        const ALL_PHOTOS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzUyTldRpyDB5Iiw8h20glKK7zY1pEt-53X6YMcw4JMR0Kki-5dZFiXU7agk5FzHoJK/exec?action=allPhotos';

        let currentAlbumId = null;
        let currentPhotoIndex = 0;
        let currentPhotosArray = [];
        let imageCache = new Map();

        // Preload image function
        function preloadImage(url, fallbackUrl) {
            if (imageCache.has(url)) {
                return Promise.resolve();
            }

            return new Promise((resolve, reject) => {
                const img = new Image();

                img.onload = () => {
                    imageCache.set(url, img);
                    resolve();
                };

                img.onerror = () => {
                    // Try fallback if primary fails
                    if (fallbackUrl && fallbackUrl !== url) {
                        const fallbackImg = new Image();
                        fallbackImg.onload = () => {
                            imageCache.set(url, fallbackImg);
                            resolve();
                        };
                        fallbackImg.onerror = () => reject();
                        fallbackImg.src = fallbackUrl;
                    } else {
                        reject();
                    }
                };

                img.src = url;
            });
        }

        async function loadPhotoAlbums() {
            const albumsGrid = document.getElementById('albums-grid');
            const loadingMessage = document.getElementById('albums-loading-message');

            try {
                const response = await fetch(`${APPS_SCRIPT_URL}?action=photoAlbums&folderId=${TEAM_PHOTOS_FOLDER_ID}`);
                const data = await response.json();

                if (data.success && data.albums) {
                    loadingMessage.style.display = 'none';

                    if (data.albums.length === 0 && data.allPhotosCount === 0) {
                        albumsGrid.innerHTML = '<p style="color: var(--sky);">No photo albums yet. Check back soon!</p>';
                        return;
                    }

                    albumsGrid.innerHTML = '';

                    // Add "All Photos" album with all photos from everywhere
                    if (data.allPhotosCount > 0) {
                        const allPhotosAlbum = createAlbumItem({
                            id: 'ALL_PHOTOS', // Special ID
                            name: 'All Photos',
                            description: `${data.allPhotosCount} photos`,
                            photoCount: data.allPhotosCount,
                            coverPhotoUrl: data.allPhotosCover ? `https://drive.google.com/thumbnail?id=${data.allPhotosCover}&sz=w400` : null
                        });
                        albumsGrid.appendChild(allPhotosAlbum);
                    }

                    // Add each subfolder album
                    data.albums.forEach(album => {
                        const albumItem = createAlbumItem(album);
                        albumsGrid.appendChild(albumItem);
                    });
                } else {
                    loadingMessage.textContent = 'Error loading albums. Please try again later.';
                    loadingMessage.style.color = '#ff6b6b';
                }
            } catch (error) {
                console.error('Error fetching albums:', error);
                loadingMessage.textContent = 'Unable to load albums. Please check your connection.';
                loadingMessage.style.color = '#ff6b6b';
            }
        }

        // Preload adjacent images for smooth navigation
        function preloadAdjacentImages(index) {
            if (index > 0) {
                preloadImage(currentPhotosArray[index - 1].fullUrl);
            }
            if (index < currentPhotosArray.length - 1) {
                preloadImage(currentPhotosArray[index + 1].fullUrl);
            }
        }


        function createAlbumItem(album) {
            const albumItem = document.createElement('div');
            albumItem.className = 'album-item';
            albumItem.onclick = () => openAlbum(album.id, album.name);

            const cover = document.createElement('div');
            cover.className = 'album-cover';

            if (album.coverPhotoUrl) {
                const img = document.createElement('img');
                img.src = album.coverPhotoUrl;
                img.alt = album.name;
                img.loading = 'lazy';
                cover.appendChild(img);
            } else {
                const placeholder = document.createElement('div');
                placeholder.className = 'album-cover-placeholder';
                placeholder.textContent = 'üì∑';
                cover.appendChild(placeholder);
            }

            const info = document.createElement('div');
            info.className = 'album-info';

            const name = document.createElement('div');
            name.className = 'album-name';
            name.textContent = album.name;

            const description = document.createElement('div');
            description.className = 'album-description';
            description.textContent = album.description;

            info.appendChild(name);
            info.appendChild(description);

            albumItem.appendChild(cover);
            albumItem.appendChild(info);

            return albumItem;
        }

        async function openAlbum(albumId, albumName) {
            currentAlbumId = albumId;

            document.getElementById('albums-view').style.display = 'none';
            document.getElementById('album-photos-view').style.display = 'block';
            document.getElementById('album-title').textContent = albumName;

            const photoGrid = document.getElementById('photo-grid');
            const loadingMessage = document.getElementById('photos-loading-message');

            photoGrid.innerHTML = '';
            loadingMessage.style.display = 'block';
            loadingMessage.textContent = 'Loading photos...';
            loadingMessage.style.color = 'var(--sky)';

            let retries = 3;
            while (retries > 0) {
                try {
                    let response;
                    let url;

                    // Check if this is the "All Photos" album
                    if (albumId === 'ALL_PHOTOS') {
                        url = ALL_PHOTOS_SCRIPT_URL;
                        console.log('Fetching ALL photos from:', url); // DEBUG
                    } else {
                        url = `${ALBUM_PHOTOS_SCRIPT_URL}&folderId=${albumId}`;
                        console.log('Fetching album photos from:', url); // DEBUG
                    }

                    response = await fetch(url);

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();

                    if (data.success && data.photos) {
                        loadingMessage.style.display = 'none';

                        if (data.photos.length === 0) {
                            photoGrid.innerHTML = '<p style="color: var(--sky);">No photos in this album yet.</p>';
                            return;
                        }

                        currentPhotosArray = data.photos;

                        data.photos.forEach((photo, index) => {
                            const photoItem = document.createElement('div');
                            photoItem.className = 'photo-item';
                            photoItem.onclick = () => openPhotoModal(index);

                            const img = document.createElement('img');
                            img.src = photo.thumbnailUrl;
                            img.alt = photo.name;
                            img.loading = 'lazy';

                            img.onerror = function () {
                                this.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><text x="50%" y="50%" font-size="40" text-anchor="middle" dy=".3em">üì∑</text></svg>';
                            };

                            photoItem.appendChild(img);

                            if (photo.caption) {
                                const caption = document.createElement('div');
                                caption.className = 'photo-caption';
                                caption.textContent = photo.caption;
                                photoItem.appendChild(caption);
                            }

                            photoGrid.appendChild(photoItem);
                        });

                        // Preload first few images with delay
                        for (let i = 0; i < Math.min(3, data.photos.length); i++) {
                            setTimeout(() => preloadImage(data.photos[i].fullUrl, data.photos[i].fallbackUrl), i * 500);
                        }

                        return; // Success, exit retry loop
                    } else {
                        throw new Error(data.error || 'Unknown error');
                    }
                } catch (error) {
                    console.error(`Error fetching album photos (${retries} retries left):`, error);
                    retries--;

                    if (retries > 0) {
                        loadingMessage.textContent = `Loading photos... (retrying in 1 second)`;
                        await new Promise(resolve => setTimeout(resolve, 1000));
                    } else {
                        loadingMessage.textContent = 'Unable to load photos. Please check your connection.';
                        loadingMessage.style.color = '#ff6b6b';
                    }
                }
            }
        }

        function backToAlbums() {
            document.getElementById('albums-view').style.display = 'block';
            document.getElementById('album-photos-view').style.display = 'none';
            currentAlbumId = null;
            currentPhotosArray = [];
        }

        async function openPhotoModal(index) {
            currentPhotoIndex = index;
            const photo = currentPhotosArray[index];

            const modal = document.getElementById('photo-modal');
            const modalImg = document.getElementById('modal-image');
            const modalCaption = document.getElementById('modal-caption');
            const loading = document.getElementById('photo-loading');
            const downloadBtn = document.getElementById('download-btn');
            const shareBtn = document.getElementById('share-btn');

            // Hide navbar
            document.querySelector('.nav-bar').style.display = 'none';

            // Prevent body scroll
            document.body.classList.add('modal-open');

            modal.classList.add('active');
            modalImg.style.display = 'none';
            loading.style.display = 'block';
            loading.textContent = 'Loading high-resolution image...';

            // Show/hide navigation arrows
            document.getElementById('prev-photo').style.display = index > 0 ? 'flex' : 'none';
            document.getElementById('next-photo').style.display = index < currentPhotosArray.length - 1 ? 'flex' : 'none';

            // Set up download button
            downloadBtn.onclick = () => downloadPhoto(photo.downloadUrl, photo.name);

            // Set up share button
            shareBtn.onclick = () => sharePhoto(photo);

            // Try multiple URL formats for loading
            const urlsToTry = [
                { url: photo.fullUrl, timeout: 60000, label: 'high-resolution image' }, // 60 seconds for main image
                { url: photo.fallbackUrl, timeout: 30000, label: 'alternate source' },
                { url: photo.downloadUrl, timeout: 30000, label: 'download source' },
                { url: photo.thumbnailUrl, timeout: 15000, label: 'preview image' }
            ].filter(item => item.url); // Remove any undefined URLs

            let imageLoaded = false;
            let currentUrlIndex = 0;

            // Progress indicator for first image
            let progressInterval;
            let secondsElapsed = 0;

            while (currentUrlIndex < urlsToTry.length && !imageLoaded) {
                const currentItem = urlsToTry[currentUrlIndex];
                const currentUrl = currentItem.url;

                try {
                    // Check cache first
                    if (imageCache.has(currentUrl)) {
                        modalImg.src = currentUrl;
                        modalImg.style.display = 'block';
                        loading.style.display = 'none';
                        imageLoaded = true;
                        break;
                    }

                    // Show appropriate loading message
                    if (currentUrlIndex === 0) {
                        loading.textContent = 'Loading high-resolution image...';
                        loading.style.color = 'var(--white)';

                        // Start progress indicator for first image only
                        secondsElapsed = 0;
                        progressInterval = setInterval(() => {
                            secondsElapsed++;
                            loading.textContent = `Loading high-resolution image... (${secondsElapsed}s)`;
                        }, 1000);
                    } else {
                        loading.textContent = `Trying ${currentItem.label}... (${currentUrlIndex + 1}/${urlsToTry.length})`;
                        loading.style.color = 'var(--white)';
                    }

                    await new Promise((resolve, reject) => {
                        const img = new Image();
                        const timeout = setTimeout(() => {
                            reject(new Error('Image load timeout'));
                        }, currentItem.timeout);

                        img.onload = () => {
                            clearTimeout(timeout);
                            if (progressInterval) {
                                clearInterval(progressInterval);
                                progressInterval = null;
                            }
                            imageCache.set(currentUrl, img);
                            resolve();
                        };

                        img.onerror = () => {
                            clearTimeout(timeout);
                            if (progressInterval) {
                                clearInterval(progressInterval);
                                progressInterval = null;
                            }
                            reject(new Error('Image load failed'));
                        };

                        img.src = currentUrl;
                    });

                    // If we get here, image loaded successfully
                    if (progressInterval) {
                        clearInterval(progressInterval);
                        progressInterval = null;
                    }

                    modalImg.src = currentUrl;

                    // Force the image to take maximum space
                    modalImg.onload = function () {
                        const windowWidth = window.innerWidth;
                        const windowHeight = window.innerHeight;
                        const availableHeight = windowHeight - 180; // Account for header/footer
                        const availableWidth = windowWidth - 40; // Account for padding

                        const imgRatio = this.naturalWidth / this.naturalHeight;
                        const viewportRatio = availableWidth / availableHeight;

                        if (imgRatio > viewportRatio) {
                            // Image is wider - fit to width
                            this.style.width = availableWidth + 'px';
                            this.style.height = 'auto';
                        } else {
                            // Image is taller - fit to height
                            this.style.height = availableHeight + 'px';
                            this.style.width = 'auto';
                        }
                    };

                    modalImg.style.display = 'block';
                    loading.style.display = 'none';
                    imageLoaded = true;

                    // Show success message briefly if it took a while
                    if (currentUrlIndex === 0 && secondsElapsed > 5) {
                        const successMsg = document.createElement('div');
                        successMsg.style.cssText = `
                                            position: fixed;
                                            top: 80px;
                                            left: 50%;
                                            transform: translateX(-50%);
                                            background: var(--sunbeam);
                                            color: var(--black);
                                            padding: 0.75rem 1.5rem;
                                            border-radius: 8px;
                                            font-weight: 600;
                                            z-index: 3002;
                                        `;
                        successMsg.textContent = 'Image loaded!';
                        document.body.appendChild(successMsg);

                        setTimeout(() => {
                            successMsg.remove();
                        }, 2000);
                    }

                    // Preload adjacent images
                    setTimeout(() => preloadAdjacentImages(index), 500);

                } catch (error) {
                    console.error(`Failed to load image from ${currentItem.label}:`, error);

                    // Clear progress interval if it exists
                    if (progressInterval) {
                        clearInterval(progressInterval);
                        progressInterval = null;
                    }

                    currentUrlIndex++;

                    // If this was the last URL, show error
                    if (currentUrlIndex >= urlsToTry.length) {
                        loading.textContent = 'Unable to load image. Please try again later.';
                        loading.style.color = '#ff6b6b';

                        // Keep loading message visible for 3 seconds
                        setTimeout(() => {
                            loading.style.display = 'none';
                        }, 3000);
                    }
                }
            }

            // Set caption
            if (photo.caption) {
                modalCaption.textContent = photo.caption;
                modalCaption.style.display = 'block';
            } else {
                modalCaption.style.display = 'none';
            }
        }

        function navigatePhoto(direction) {
            const newIndex = currentPhotoIndex + direction;
            if (newIndex >= 0 && newIndex < currentPhotosArray.length) {
                openPhotoModal(newIndex);
            }
        }

        function closePhotoModal() {
            const modal = document.getElementById('photo-modal');
            modal.classList.remove('active');

            // Show navbar again
            document.querySelector('.nav-bar').style.display = 'block';

            // Re-enable body scroll
            document.body.classList.remove('modal-open');
        }

        function downloadPhoto(url, filename) {
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.target = '_blank';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        async function sharePhoto(photo) {
            const shareData = {
                title: photo.name,
                text: photo.caption || 'Check out this photo from Tonka Track!',
                url: photo.fullUrl
            };

            try {
                if (navigator.share) {
                    // Use native share if available (mobile)
                    await navigator.share(shareData);
                } else {
                    // Fallback: Copy link to clipboard
                    await navigator.clipboard.writeText(photo.fullUrl);
                    alert('Link copied to clipboard!');
                }
            } catch (error) {
                console.error('Error sharing:', error);
                // Fallback: show share URL
                prompt('Copy this link to share:', photo.fullUrl);
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            const modal = document.getElementById('photo-modal');
            if (modal.classList.contains('active')) {
                if (e.key === 'Escape') {
                    closePhotoModal();
                } else if (e.key === 'ArrowLeft') {
                    navigatePhoto(-1);
                } else if (e.key === 'ArrowRight') {
                    navigatePhoto(1);
                }
            }
        });

        // Update showTab function
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));

            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'files') {
                loadFiles();
            } else if (tabName === 'photos') {
                document.getElementById('albums-view').style.display = 'block';
                document.getElementById('album-photos-view').style.display = 'none';
                loadPhotoAlbums();
            }
        }


    </script>
</body>
</html>